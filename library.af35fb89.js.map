{"mappings":"msBAAA,IAAAA,EAAAC,EAAA,S,aAIaC,EAAWC,SAASC,cAAc,gBAClCC,EAAcF,SAASC,cAAc,sBAejC,SAARE,EAASC,GACD,WAAXA,EAAEC,MACJC,G,CA6BJ,SAASC,EAAyBC,EAASC,G,IAClCC,EAAP,OAAwB,QAAjBA,EAAAb,EAAAc,QAAQC,KAAKH,UAAI,IAAjBC,OAAA,EAAAA,EAAmBG,MAAK,SAAAC,G,OAASA,EAAMC,GAAGC,aAAeR,C,IAIlE,SAASF,IACPT,EAAAc,QAAQM,OAAO,iBACfjB,SAASkB,iBAAiB,UAAWf,GACrCH,SAASmB,KAAKC,MAAMC,SAAW,GAC/BtB,EAASuB,UAAUC,IAAI,cACvB,EAAAC,EAAAC,iBAAgB5B,EAAAc,QAAQC,KAAK,mB,CAoI/B,SAASc,EAAkBjB,EAAKkB,EAAOC,GACrC,IAAIC,EAAchC,EAAAc,QAAQC,KAAKH,IAAQ,GACvCmB,EAAON,UAAUL,OAAO,SACxBY,EAAcA,EAAYC,QAAO,SAAAhB,G,OAASA,EAAMC,GAAGC,YAAcW,EAAMZ,E,IACvElB,EAAAc,QAAQoB,KAAKtB,EAAKoB,E,CAGpB,SAASG,EAAYC,EAAYC,G,IACxBxB,EAAP,OAA+B,QAAxBA,EAAAb,EAAAc,QAAQC,KAAKqB,UAAW,IAAxBvB,OAAA,EAAAA,EAA0ByB,MAAK,SAAArB,G,OAASA,EAAMC,GAAGC,aAAekB,C,IAkBlE,SAASE,EAAUC,EAAWC,GAKnC,IAFA,IAAMC,EAAS1C,EAAAc,QAAQC,KAAK,SACtB4B,EAAW,GAEXC,EAAa,EACjBA,EAAaJ,EAAUK,QAAUD,EAAaH,EAC9CG,IACA,C,IACKE,GAAW,EAAXC,GAAW,EAAXC,OAAWC,E,IAAhB,QAAKC,EAAAC,EAAeT,EAAMU,OAAAC,cAArBP,GAAAI,EAAAC,EAAWG,QAAAC,MAAXT,GAAW,GAAX,IAAMhB,EAANoB,EAAWpB,MACVU,EAAUI,KAAgBd,EAAMZ,IAClCyB,EAASa,KAAK1B,EAAM2B,K,WAFnBV,GAAW,EAAXC,EAAWU,C,aAAXZ,GAAW,MAAXK,EAAWQ,QAAXR,EAAWQ,Q,YAAXZ,E,MAAAC,C,GAOP,OADIR,EAAUK,OAASJ,IAAgBE,EAASF,EAAiB,GAAK,SAC/DE,EAASiB,KAAK,K,CAtOOzD,SAASC,cAAc,qBAEtCiB,iBAAiB,SAAS,SAAAd,GAgCf,IAAPI,EA9BbJ,EAAEsD,OAAOC,QAAQ,oBACnBvD,EAAEwD,iBA6BapD,EA5BLJ,EAAEsD,OAAOC,QAAQ,kBAAkBE,QAAQC,YA6BvD9D,SAASkB,iBAAiB,UAAWf,GAErCJ,EAASE,cAAc,gBAAgB4D,QAAQE,aAAevD,EAC9DT,EAASE,cAAc,gBAAgB+D,UAoBzC,SAA6BxD,GAC3B,IAAMyD,EACJ1D,EAAyBC,EAAS,WAClCD,EAAyBC,EAAS,iBAClCD,EAAyBC,EAAS,cAEpCX,EAAAc,QAAQoB,KAAK,gBAAiBkC,GAE9B,IACEC,EASED,EATFC,YACAC,EAQEF,EARFE,MACAC,EAOEH,EAPFG,eACA/B,EAME4B,EANF5B,UAEAgC,GAIEJ,EALFK,aAKEL,EAJFI,cACAE,EAGEN,EAHFM,WACAC,EAEEP,EAFFO,WACAC,EACER,EADFQ,SAGFjE,EAAUA,EAAQQ,WAElB,IAAM0D,EAASR,EACX,kCAA8CS,OAAZT,GAClC,yHAGAU,EAAa5C,EAAY,eAAgBxB,EAAQQ,YAAc,QAAU,GACvE6D,EAAkB,6DAAwEF,OAAXC,EAAW,8TAOhGA,EAAa5C,EAAY,aAAcxB,EAAQQ,YAAc,QAAU,GACvE,IAAM8D,EAAgB,2DAAsEH,OAAXC,EAAW,wTAO5F,MAAO,6DAC+BD,OAAhBD,EAAO,YAGkBC,OAHTR,EAAM,wHAQYQ,OALTR,EAAM,4QAOzBQ,OAF4BN,EAAaU,QAAQ,GAAG,yCAU1BJ,OAR1BJ,EACI,sCAAiDI,OAAXJ,EAAW,WACjD,GACL,wNAS2BI,OAJAH,EAAWO,QAAQ,GAAG,kMAQpDJ,OAJ8BP,EAAe,wFAiBpBO,OAbzBtC,EAAUK,OACN,wGAIAiC,OAH8BvC,EAC9BC,EACAA,EAAUK,QACV,SACA,GACL,iRASHiC,OAH6BF,GAAsB,kBAAkB,0GAIrEE,OADAE,EAAgB,0BACFF,OAAdG,EAAc,uE,CA3GiBE,CAAoBxE,GACvER,SAASmB,KAAKC,MAAMC,SAAW,SAC/BtB,EAASuB,UAAUL,OAAO,aA8J5B,SAAgBgE,EAAKC,GACnB,IAAMC,EAAO,KACPC,EAAO,GACThF,EAAIJ,SAASC,cAAc,QAC3BoF,EAAI,EACJC,EAAIC,KAAKC,MAAML,GAAQF,EAAMG,IAC7BK,EAAWC,aAAY,YACzBL,GAAQD,IACCH,GACPU,cAAcF,GAEhBrF,EAAE4D,UAAYqB,EAAEN,QAAQ,E,GACvBO,E,CAxKHM,CADqB7F,EAASE,cAAc,QAAQ4F,a,IA9BjC3F,EAATgB,iBAAiB,QAASZ,GAUjBP,EAAZmB,iBAAiB,SAE1B,SAAuBd,GACrB,GAAIA,EAAE0F,gBAAkB1F,EAAEsD,OAExB,YADApD,IAGwB,WAAtBF,EAAEsD,OAAOqC,WAiIYnE,EAhILxB,EAAEsD,OAAOC,QAAQ,cAiI/BlD,GAAoB,QAAdC,EAAAkB,EAAOiC,eAAO,IAAdnD,OAAA,EAAAA,EAAgBsF,YAAa,QAGnCC,EAAa,gBAEbtE,EAAQ9B,EAAAc,QAAQC,KAAKqF,GAEvBpG,EAAAc,QAAQC,KAAKH,IAAQuB,EAAYvB,EAAKkB,EAAMZ,GAAGC,YACjDU,EAAkBjB,EAAKkB,EAAOC,IAE1BnB,EAAIyF,SAAS,UAAYlE,EAAY,aAAcL,EAAMZ,GAAGC,aAE9DU,EACE,aACAC,EACAC,EAAOuE,cAAclG,cAAc,sBAO3C,SAAsBQ,EAAKkB,EAAOC,GAChC,IAAIC,EAAchC,EAAAc,QAAQC,KAAKH,IAAQ,GACvCoB,EAAYwB,KAAK1B,GACjBC,EAAON,UAAUC,IAAI,SACrB1B,EAAAc,QAAQoB,KAAKtB,EAAKoB,E,CARhBuE,CAAa3F,EAAKkB,EAAOC,KAnB7B,IAA2BA,EACblB,EAAND,EAGAwF,EAEAtE,C,uFCzKR,IA0BA0E,EAAe,CACbtE,KA3BW,SAACtB,EAAKkB,GACjB,IACE,IAAM2E,EAAkBC,KAAKC,UAAU7E,GACvC8E,aAAaC,QAAQjG,EAAK6F,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAuB3CjG,KAnBW,SAAAH,GACX,IACE,IAAM6F,EAAkBG,aAAaK,QAAQrG,GAC7C,OAA2B,OAApB6F,OAA2BxD,EAAYyD,KAAKQ,MAAMT,E,CACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAe3C5F,OAXa,SAAAR,GACX,IACoC,OAA9BgG,aAAaK,QAAQrG,IAAiBgG,aAAaO,WAAWvG,E,CAClE,MAAOkG,GACLC,QAAQD,MAAM,uBAAwBA,EAAME,Q,yMCtBpD,IAAAI,EAAAnH,EAAA,S,aAKaoH,EAAUlH,SAASC,cAAc,iBAGxCkH,GAFiBnH,SAASC,cAAc,mBAE7BD,SAASC,cAAc,iBAClCmH,EAAUpH,SAASC,cAAc,eAGjCoH,EAAc,qBAGdC,EAAiBtH,SAASC,cAAc,mBACxCsH,EAAavH,SAASC,cAAc,iBAE7BuH,EAAmBxH,SAASC,cAAc,sBAEjDwH,EAAa,aACbC,EAAa,eAQZ,SAASC,EAAgBC,GAC1BJ,IAEO,KAALI,IACFL,EAAWjG,UAAUC,IAAI8F,GACzBQ,IACAC,KAEO,KAALF,IACFN,EAAehG,UAAUC,IAAI8F,GAC7BU,IACAD,K,CASN,SAASD,IACPG,EAAaP,EAAYF,GACzBO,IACAP,EAAWjG,UAAUC,IAAI8F,GACzBC,EAAehG,UAAUL,OAAOoG,GAChCxH,EAAAc,QAAQoB,KAAK,kBAAmB,I,CAGlC,SAASgG,IACPC,EAAaN,EAAYJ,GACzBQ,IACAP,EAAWjG,UAAUL,OAAOoG,GAC5BC,EAAehG,UAAUC,IAAI8F,GAC7BxH,EAAAc,QAAQoB,KAAK,kBAAmB,I,CAvClClC,EAAAc,QAAQoB,KAAK,kBAAmB,KAGhC4F,EAAgB9H,EAAAc,QAAQC,KAAK,oBAoB7B2G,WAAYrG,iBAAiB,QAAS2G,GACtCP,WAAgBpG,iBAAiB,QAAS6G,GAmBdtB,aAAaK,QAAQ,cACnBL,aAAaK,QAAQ,gBAD5C,IAEMmB,EAAiBxB,aAAaK,QAAQ,SAClBP,KAAKQ,MAAMkB,GAErC,SAASH,IAGRN,GAA2C,OAAvBN,EAAQgB,WACE,UAA1BrI,EAAAc,QAAQC,KAAK,UAETuG,EAAS/F,MAAM+G,QAAU,OACzBf,EAAQhG,MAAM+G,QAAU,SAIxBhB,EAAS/F,MAAM+G,QAAU,OACzBf,EAAQhG,MAAM+G,QAAU,SAGzBX,GAAoBN,EAAQgB,WACnCf,EAAS/F,MAAM+G,QAAU,OACzBf,EAAQhG,MAAM+G,QAAU,O,CAOhC,SAASH,EAAavH,EAAK2H,GAc3B,IAA6BC,EAbvBb,SACwB1E,IAAtBjD,EAAAc,QAAQC,KAAKH,IAAmD,IAA7BZ,EAAAc,QAAQC,KAAKH,GAAKiC,QACvD0F,EAAI9G,UAAUL,OAAO,uBACrBmH,EAAI9G,UAAUC,IAAI,yBAClB2F,EAAQlD,UAAY,KAEpBoE,EAAI9G,UAAUC,IAAI,uBAOK8G,EANH5H,EAOxByG,EAAQlD,WAAY,EAAAiD,EAAAqB,kBAAiBzI,EAAAc,QAAQC,KAAKyH,K,8FC9GpD,IAAAE,EAAAzI,EAAA,SAGO,SAAS0I,EAAiBC,GAC/B,OAAOA,EACJC,KACC,SAAAC,G,IACE5H,EAAE4H,EAAF5H,GACAmD,EAAWyE,EAAXzE,YACAC,EAAKwE,EAALxE,MACAC,EAAcuE,EAAdvE,eACA/B,EAASsG,EAATtG,UACAiC,EAAYqE,EAAZrE,aACAsE,EAAaD,EAAbC,cACAC,EAAcF,EAAdE,eAEIC,EAAIxE,EAEJyE,EAAIF,EACJvE,IACFwE,EAAIA,EAAEE,MAAM,EAAG,IAEbH,IACFE,EAAIA,EAAEC,MAAM,EAAG,IAGjB,IAAMtE,EAAS,kCAA8CC,OAAZT,GACjD,MAAO,2DAGwCS,OAHmB5D,EAAG,wJAGN4D,OAAhBD,EAAO,WACXC,OADoBR,EAAM,yDAGnDQ,OAFyBP,GAAkBwE,EAAc,oFAKnDjE,OAHNtC,EAAUK,OAAS,SAAiCiC,QAAxB,EAAA4D,EAAAU,WAAU5G,EAAW,GAAG,WAAW,GAAG,yFAGrDsC,OAAPmE,GAAKC,EAAE,6F,IAQlCtF,KAAK,G,iDCfV,IAAMyF,EAAO,CACXC,MAAOnJ,SAASC,cAAc,qBAC9BmJ,SAAUpJ,SAASC,cAAc,oBACjCoJ,cAAerJ,SAASC,cAAc,yBA0BxC,SAASqJ,EAASC,GACG,WAAfA,EAAMlJ,MACRmJ,G,CAUJ,SAASA,IAEPxJ,SAASyJ,oBAAoB,UAAWH,GACxCJ,EAAKC,MAAM7H,UAAUC,IAAI,Y,CApC3B2H,EAAKG,cAAcnI,iBAAiB,SAAS,SAAAd,GAC3CA,EAAEwD,iBACFsF,EAAKC,MAAM7H,UAAUoI,OAAO,aAC5B1J,SAASkB,iBAAiB,UAAWoI,E,IAMxBJ,EAAVE,SAASlI,iBAAiB,QAASsI,GAGXN,EAAxBC,MAAMjI,iBAAiB,SAE5B,SAAyBqI,GACnBA,EAAMzD,gBAAkByD,EAAM7F,QAChC8F,G,yCCrDJ,IAAAhI,EAAA1B,EAAA,S,aAGM6J,EAAQ3J,SAASC,cAAc,UAC/B2J,EAAO5J,SAASC,cAAc,QAC9B4J,EAAO7J,SAASC,cAAc,SAC9B6J,EAAQ9J,SAASC,cAAc,UAcrC,SAAS8J,EAAUtJ,GACK,SAAtBZ,EAAAc,QAAQC,KAAKH,GACTmJ,EAAKtI,UAAUC,IAAI,QACnBqI,EAAKtI,UAAUL,OAAO,O,CAG5B,SAAS+I,IACmB,SAA1BnK,EAAAc,QAAQC,KAAK,SACTkJ,EAAMxI,UAAUC,IAAI,eACpBuI,EAAMxI,UAAUL,OAAO,eACD,UAA1BpB,EAAAc,QAAQC,KAAK,SACTiJ,EAAKvI,UAAUC,IAAI,eACnBsI,EAAKvI,UAAUL,OAAO,eACtBO,EAAAyI,mBAAkB,EAAAzI,EAAA0I,e,CAzBxBH,EAAU,SACVC,IAEAL,EAAMzI,iBAAiB,SAEhB,SAAqBd,GAC1B,GAA0B,WAAtBA,EAAEsD,OAAOqC,SAAuB,OACpClG,EAAAc,QAAQoB,KAAK,QAAS3B,EAAEsD,OAAO/B,OAC/BoI,EAAU,SACVC,G,IAoBKxI,EAAAyI,kBAAkBN,EAAMrI,UAAUC,IAAI,sB","sources":["src/js/modal.js","src/js/storage.js","src/js/renderLibMovie.js","src/js/cardListWithGenres.js","src/js/modalFooter.js","src/js/theme.js"],"sourcesContent":["'use strict';\nimport storage from './storage';\nimport { checkWhatToLoad } from './renderLibMovie';\n\nexport const backdrop = document.querySelector('[data-modal]');\nexport const closeButton = document.querySelector('[data-modal-close]');\nexport const cardsContainer = document.querySelector('.movies-container');\n\ncardsContainer.addEventListener('click', e => {\n  //Тиць по 'js-modal-open' -> відкриває модалку\n  if (e.target.closest('.js-modal-open')) {\n    e.preventDefault();\n    openModal(e.target.closest('.js-modal-open').dataset.cardMovieId);\n  }\n});\n\n// Тиць по 'data-modal-close' ->закриває модалку\ncloseButton.addEventListener('click', closeModal);\n\n//Press по Esc ->закриває модалку\nfunction pressEsc(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\n// Тиць по backdrop -> закриває модалку\nbackdrop.addEventListener('click', backdropClick);\n\nfunction backdropClick(e) {\n  if (e.currentTarget === e.target) {\n    closeModal();\n    return;\n  }\n  if (e.target.nodeName === 'BUTTON') {\n    addMovieToLibrary(e.target.closest('.movie-btn'));\n  }\n}\n\n// Якщо модалка відкрита -> кидаємо AddEventListener\nfunction openModal(movieId) {\n  document.addEventListener('keydown', pressEsc);\n\n  backdrop.querySelector('.modal-movie').dataset.modalMovieId = movieId;\n  backdrop.querySelector('.modal-movie').innerHTML = getModalMovieMarkup(movieId);\n  document.body.style.overflow = 'hidden';\n  backdrop.classList.remove('is-hidden');\n  const vote_average = backdrop.querySelector('#out').textContent;\n  outNum(vote_average, '#out');\n}\n\nfunction getMovieFromLocalStorage(movieId, key) {\n  return storage.load(key)?.find(movie => movie.id.toString() === movieId);\n}\n\n// Як тільки закривається модалка -> знімаємо EventListener\nfunction closeModal() {\n  storage.remove('current-movie');\n  document.addEventListener('keydown', pressEsc);\n  document.body.style.overflow = '';\n  backdrop.classList.add('is-hidden');\n  checkWhatToLoad(storage.load('activeInStorage'));\n}\n\nfunction getModalMovieMarkup(movieId) {\n  const currentMovie =\n    getMovieFromLocalStorage(movieId, 'movies') ||\n    getMovieFromLocalStorage(movieId, 'watched-list') ||\n    getMovieFromLocalStorage(movieId, 'queue-list');\n\n  storage.save('current-movie', currentMovie);\n\n  const {\n    poster_path,\n    title,\n    original_title,\n    genre_ids,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n  } = currentMovie;\n\n  movieId = movieId.toString();\n\n  const imgUrl = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/No-Image-Placeholder.svg/1665px-No-Image-Placeholder.svg.png';\n  // 'https://assets.specialized.com/i/specialized/undefined';\n\n  let addedClass = isInLibrary('watched-list', movieId.toString()) ? 'added' : '';\n  const btnAddToWatched = `<div class=\"modal-movie__btn movie-btn movie-btn--watched ${addedClass}\" data-modal-add-to=\"watched\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>WATCHED</button>\n                            <button class=\"add\">ADD TO<br>WATCHED</button>\n                          </div>\n                        </div>`;\n\n  addedClass = isInLibrary('queue-list', movieId.toString()) ? 'added' : '';\n  const btnAddToQueue = `<div class=\"modal-movie__btn movie-btn movie-btn--queue ${addedClass}\" data-modal-add-to=\"queue\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>QUEUE</button>\n                            <button class=\"add\">ADD TO<br>QUEUE</button>\n                          </div>\n                        </div>`;\n\n  return `<div class=\"modal-movie__poster\">\n            <img src='${imgUrl}' alt=\"${title}\" />\n          </div>\n            <div class=\"modal-movie__info\">\n                <h2 class=\"modal-movie__title\">${title}</h2>\n                <table class=\"movie-table\">\n                    <tr>\n                        <td class=\"movie-table__title\">Vote / Votes</td>\n                        <td class=\"movie-table__info\">\n                            <span id=\"out\" class=\"vote\">${vote_average.toFixed(1)}</span>\n                            ${\n                              vote_count\n                                ? ` <span>/</span><span class=\"votes\">${vote_count}</span>`\n                                : ''\n                            }\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Popularity</td>\n                        <td class=\"movie-table__info\">${popularity.toFixed(0)}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Original Title</td>\n                        <td class=\"movie-table__info\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        ${\n                          genre_ids.length\n                            ? `<td class=\"movie-table__title\">Genre</td>\n                            <td class=\"movie-table__info\">${getGenres(\n                              genre_ids,\n                              genre_ids.length\n                            )}</td>`\n                            : ''\n                        }\n                    </tr>\n                </table>\n                <div class=\"modal-movie__box\">\n                <div class=\"modal-movie__about\">\n                    <p class=\"modal-movie__description\">ABOUT</p>\n                    <p class=\"modal-movie__text\">${overview ? overview : 'no description.'}</p>\n                </div>\n                <div class=\"modal-movie__buttons\">\n                    ${btnAddToWatched}\n                    ${btnAddToQueue}\n                </div>\n                </div>\n            </div>`;\n}\n\n/* -----------------------\n\nModal buttons functionality\n\n----------------------- */\n\nfunction addMovieToLibrary(button) {\n  const key = button.dataset?.modalAddTo + '-list';\n  // const movieId = button.closest('.modal-movie').dataset.modalMovieId;\n  // let shouldRewrite = true;\n  const SOURCE_KEY = 'current-movie';\n\n  const value = storage.load(SOURCE_KEY);\n\n  if (storage.load(key) && isInLibrary(key, value.id.toString())) {\n    removeFromStorage(key, value, button);\n  } else {\n    if (key.includes('watch') && isInLibrary('queue-list', value.id.toString())) {\n      // console.log('already in queue');\n      removeFromStorage(\n        'queue-list',\n        value,\n        button.parentElement.querySelector('.movie-btn--queue')\n      );\n    }\n    addToStorage(key, value, button);\n  }\n}\n\nfunction addToStorage(key, value, button) {\n  let currentList = storage.load(key) || [];\n  currentList.push(value);\n  button.classList.add('added');\n  storage.save(key, currentList);\n}\n\nfunction removeFromStorage(key, value, button) {\n  let currentList = storage.load(key) || [];\n  button.classList.remove('added');\n  currentList = currentList.filter(movie => movie.id.toString() != value.id);\n  storage.save(key, currentList);\n}\n\nfunction isInLibrary(storageKey, valueId) {\n  return storage.load(storageKey)?.some(movie => movie.id.toString() === valueId);\n}\n\nfunction outNum(num, elem) {\n  const time = 2500;\n  const step = 0.1;\n  let e = document.querySelector('#out');\n  let n = 0;\n  let t = Math.round(time / (num / step));\n  let interval = setInterval(() => {\n    n = n + step;\n    if (n >= num) {\n      clearInterval(interval);\n    }\n    e.innerHTML = n.toFixed(1);\n  }, t);\n}\n\nexport function getGenres(genre_ids, maxGenresCount) {\n  // if (!genre_ids.length) return 'no genre specified';\n  // if (!genre_ids.length) return '';\n  const genres = storage.load('arrow');\n  const genreArr = [];\n  for (\n    let genreIndex = 0;\n    genreIndex < genre_ids.length && genreIndex < maxGenresCount;\n    genreIndex++\n  ) {\n    for (const value of genres) {\n      if (genre_ids[genreIndex] === value.id) {\n        genreArr.push(value.name);\n      }\n    }\n  }\n  if (genre_ids.length > maxGenresCount) genreArr[maxGenresCount - 1] = 'Other';\n  return genreArr.join(', ');\n}\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n    try { \n      if (localStorage.getItem(key) !== null) { localStorage.removeItem(key); }\n    } catch (error) {\n        console.error(\"Remove state error: \", error.message);\n    }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n};\n","import { markUpWithGenres } from './cardListWithGenres';\n//import { removeSceletonLoad } from './sceletonLoad';\nimport storage from './storage';\n\n//containers for render, design changes\nexport const libList = document.querySelector('.library-list');\nexport const spinner = document.querySelector('.spinner-loader');\n//bg empty page\nconst lightDiv = document.querySelector('.empty-light');\nconst darkDiv = document.querySelector('.empty-dark');\n\n//btn accent\nconst active_type = 'header__btn-active';\n\n//listerners\nconst btnOpenWatched = document.querySelector('.js-watched-btn');\nconst btnOpenQue = document.querySelector('.js-queue-btn');\n\nexport const libraryContainer = document.querySelector('.library-container');\n\nconst queStorage = 'queue-list';\nconst watStorage = 'watched-list';\n\nstorage.save('activeInStorage', 'q');\n\n//first open\ncheckWhatToLoad(storage.load('activeInStorage'));\n// funnyGuyOnBg();\n\nexport function checkWhatToLoad(x) {\n  if (libraryContainer) {\n    // console.log(storage.load('activeInStorage'));\n    if (x == 'q') {\n      btnOpenQue.classList.add(active_type);\n      openQueue(queStorage, btnOpenQue);\n      funnyGuyOnBg();\n    }\n    if (x == 'w') {\n      btnOpenWatched.classList.add(active_type);\n      openWatched(watStorage, btnOpenWatched);\n      funnyGuyOnBg();\n    }\n  }\n}\n\n//queue btn is active on load\nbtnOpenQue?.addEventListener('click', openQueue);\nbtnOpenWatched?.addEventListener('click', openWatched);\n\nfunction openQueue() {\n  checkStorage(queStorage, btnOpenQue);\n  funnyGuyOnBg();\n  btnOpenQue.classList.add(active_type);\n  btnOpenWatched.classList.remove(active_type);\n  storage.save('activeInStorage', 'q');\n}\n\nfunction openWatched() {\n  checkStorage(watStorage, btnOpenWatched);\n  funnyGuyOnBg();\n  btnOpenQue.classList.remove(active_type);\n  btnOpenWatched.classList.add(active_type);\n  storage.save('activeInStorage', 'w');\n}\n\n//data parsed\nexport const queueStorage = localStorage.getItem('queue-list');\nexport const watchedStorage = localStorage.getItem('watched-list');\nexport const valuesOfGenres = localStorage.getItem('arrow');\nexport const arrValuesOfGenres = JSON.parse(valuesOfGenres);\n\nexport function funnyGuyOnBg() {\n\n\n    if (libraryContainer && libList.firstChild === null) {\n        if (storage.load('theme') === 'light') {\n            {\n                lightDiv.style.display = 'flex';\n                darkDiv.style.display = 'none';\n            }\n        } else {\n            {\n                lightDiv.style.display = 'none';\n                darkDiv.style.display = 'flex';\n            }\n        }\n    } else if (libraryContainer && libList.firstChild !== null){\n        lightDiv.style.display = 'none';\n        darkDiv.style.display = 'none';\n  } else {\n    lightDiv.style.display = 'none';\n    darkDiv.style.display = 'none';\n  }\n}\n//storage\nfunction checkStorage(key, btn) {\n  if (libraryContainer) {\n    if (storage.load(key) === undefined || storage.load(key).length === 0) {\n      btn.classList.remove('.header__btn-active');\n      btn.classList.add('.header__btn-noactive');\n      libList.innerHTML = '';\n    } else {\n      btn.classList.add('.header__btn-active');\n      addMarkUpToLibByKey(key);\n    }\n  }\n}\n\n//render\nfunction addMarkUpToLibByKey(keyOfActualStorage) {\n  libList.innerHTML = markUpWithGenres(storage.load(keyOfActualStorage));\n}\n","import { getGenres } from './modal';\nimport { arrValuesOfGenres } from './renderLibMovie';\n\nexport function markUpWithGenres(arrFromStorage) {\n  return arrFromStorage\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        original_title,\n        genre_ids,\n        release_date,\n        original_name,\n        first_air_date,\n      }) => {\n        let a = release_date;\n\n        let b = first_air_date;\n        if (release_date) {\n          a = a.slice(0, 4);\n        }\n        if (first_air_date) {\n          b = b.slice(0, 4);\n        }\n\n        const imgUrl = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        return `<li class=\"home-card js-modal-open\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title || original_name}</h2>\n                    <p class=\"card-info_descr\">\n                        ${genre_ids.length ? `<span>${getGenres(genre_ids, 3)}</span>` : ''}\n                        \n                        |\n                        <span>${a || b}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n      }\n    )\n\n    .join('');\n}\n","// const modalLink = document.querySelector('.footer__rights-link');\n// const closeBtn = document.querySelector('.modal__closeBtn');\n// const backDropp = document.querySelector('[data-modal-team]');\n\n// modalLink.addEventListener('click', e => {\n//   e.preventDefault();\n//   backDropp.classList.toggle('is-hidden');\n//   document.addEventListener('keydown', pressEsc);\n// });\n// closeBtn.addEventListener('click', e => {\n//   backDropp.classList.remove('is-hidden');\n// });\n\n// function pressEsc(e) {\n//   if (e.code === 'Escape') {\n//     backDropp.classList.add('is-hidden');\n//     document.removeEventListener('keydown', pressEsc);\n//   }\n// }\n\n// backDropp.addEventListener('click', onBackdropp);\n\n// function onBackdropp(e) {\n//   if (e.target === e.currentTarget) {\n//     document.removeEventListener('keydown', pressEsc);\n//     backDropp.classList.add('is-hidden');\n//   }\n// }\n\nconst refs = {\n  modal: document.querySelector('[data-modal-team]'),\n  closeBtn: document.querySelector('.modal__closeBtn'),\n  openModalTeam: document.querySelector('.footer__rights-link'),\n};\n\n// відкриває модалку\n// console.log(refs.openModalTeam);\nrefs.openModalTeam.addEventListener('click', e => {\n  e.preventDefault();\n  refs.modal.classList.toggle('is-hidden');\n  document.addEventListener('keydown', pressEsc);\n});\n\n// refs.openModalTeam.addEventListener('click', onOpenModal);\n\n// закриває модалку\nrefs.closeBtn.addEventListener('click', onCloseModal);\n\n// тиць по бекдропу закриває модалку\nrefs.modal.addEventListener('click', onBackdropClick);\n\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    onCloseModal();\n  }\n}\n\n// тиць по ESC закриває модалку\nfunction pressEsc(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nfunction onOpenModal() {\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', pressEsc);\n  refs.modal.classList.remove('is-hidden');\n}\n\nfunction onCloseModal() {\n  // document.body.style.overflow = '';\n  document.removeEventListener('keydown', pressEsc);\n  refs.modal.classList.add('is-hidden');\n}\n","import { funnyGuyOnBg, libraryContainer } from './renderLibMovie';\nimport storage from './storage';\n\nconst theme = document.querySelector('.theme');\nconst body = document.querySelector('body');\nconst dark = document.querySelector('#dark');\nconst light = document.querySelector('#light');\n\nthemeLoad('theme');\nchangeBtnClass();\n\ntheme.addEventListener('click', changeTheme);\n\nexport function changeTheme(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n  storage.save('theme', e.target.value);\n  themeLoad('theme');\n  changeBtnClass();\n}\n\nfunction themeLoad(key) {\n  storage.load(key) === 'dark'\n    ? body.classList.add('dark')\n    : body.classList.remove('dark');\n}\n\nfunction changeBtnClass() {\n  storage.load('theme') === 'dark'\n    ? light.classList.add('passive-btn')\n    : light.classList.remove('passive-btn');\n  storage.load('theme') === 'light'\n    ? dark.classList.add('passive-btn')\n    : dark.classList.remove('passive-btn');\n  if (libraryContainer) funnyGuyOnBg();\n}\n\nfunction posititionThemeForHome() {\n  if (!libraryContainer) theme.classList.add('theme-home-position');\n}\n\nposititionThemeForHome();\n"],"names":["$jzQFI","parcelRequire","$40873ecf3c18e122$export$48e901322468f6d5","document","querySelector","$40873ecf3c18e122$export$efe229eab43a9869","$40873ecf3c18e122$var$pressEsc","e","code","$40873ecf3c18e122$var$closeModal","$40873ecf3c18e122$var$getMovieFromLocalStorage","movieId","key","ref","default","load","find","movie","id","toString","remove","addEventListener","body","style","overflow","classList","add","$7lxfF","checkWhatToLoad","$40873ecf3c18e122$var$removeFromStorage","value","button","currentList","filter","save","$40873ecf3c18e122$var$isInLibrary","storageKey","valueId","some","$40873ecf3c18e122$export$c5604fa8028da00","genre_ids","maxGenresCount","genres","genreArr","genreIndex","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","push","name","err","return","join","target","closest","preventDefault","dataset","cardMovieId","modalMovieId","innerHTML","currentMovie","poster_path","title","original_title","vote_average","release_date","vote_count","popularity","overview","imgUrl","concat","addedClass","btnAddToWatched","btnAddToQueue","toFixed","$40873ecf3c18e122$var$getModalMovieMarkup","num","elem","time","step","n","t","Math","round","interval","setInterval","clearInterval","$40873ecf3c18e122$var$outNum","textContent","currentTarget","nodeName","modalAddTo","SOURCE_KEY","includes","parentElement","$40873ecf3c18e122$var$addToStorage","$e40a24b7fc93604f$export$2e2bcd8739ae039","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","parse","removeItem","$1Vkri","$559449aba61c1cf3$export$889a3b120e40c69b","$559449aba61c1cf3$var$lightDiv","$559449aba61c1cf3$var$darkDiv","$559449aba61c1cf3$var$active_type","$559449aba61c1cf3$var$btnOpenWatched","$559449aba61c1cf3$var$btnOpenQue","$559449aba61c1cf3$export$9374592304a059c9","$559449aba61c1cf3$var$queStorage","$559449aba61c1cf3$var$watStorage","$559449aba61c1cf3$export$64979bff8eb5b671","x","$559449aba61c1cf3$var$openQueue","$559449aba61c1cf3$export$dcf15d3bcfe56fe3","$559449aba61c1cf3$var$openWatched","$559449aba61c1cf3$var$checkStorage","$559449aba61c1cf3$export$9b12328d6814fe8c","firstChild","display","btn","keyOfActualStorage","markUpWithGenres","$5xtVg","$166af81e96a2afb9$export$644c7ecedbec0546","arrFromStorage","map","param","original_name","first_air_date","a","b","slice","getGenres","$c596dd6d0e61f3b7$var$refs","modal","closeBtn","openModalTeam","$c596dd6d0e61f3b7$var$pressEsc","event","$c596dd6d0e61f3b7$var$onCloseModal","removeEventListener","toggle","$73a6fccb2ce51eb8$var$theme","$73a6fccb2ce51eb8$var$body","$73a6fccb2ce51eb8$var$dark","$73a6fccb2ce51eb8$var$light","$73a6fccb2ce51eb8$var$themeLoad","$73a6fccb2ce51eb8$var$changeBtnClass","libraryContainer","funnyGuyOnBg"],"version":3,"file":"library.af35fb89.js.map"}